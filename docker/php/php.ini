; =========================
; php.ini (Docker / Dev for Laravel)
; =========================

[PHP]
; ---- Basics ----
expose_php = Off
default_charset = "UTF-8"
date.timezone = "Asia/Tokyo"

; ---- Limits (dev-friendly) ----
memory_limit = 1024M
max_execution_time = 120
max_input_time = 120
max_input_vars = 5000

; ---- Upload ----
file_uploads = On
upload_max_filesize = 100M
post_max_size = 100M
max_file_uploads = 50

; ---- Error handling (dev) ----
display_errors = On
display_startup_errors = On
error_reporting = E_ALL
log_errors = On
; Dockerではstderrに流すのが扱いやすい
error_log = /proc/self/fd/2
html_errors = On

; ---- Security-ish defaults (still dev) ----
short_open_tag = Off
cgi.fix_pathinfo = 0
; disable_functions は開発では基本入れない（artisan等で困ることがある）

; ---- Performance helpers ----
realpath_cache_size = 4096K
realpath_cache_ttl = 600

; ---- Sessions ----
session.save_handler = files
session.save_path = "/tmp"
session.gc_maxlifetime = 1440
session.cookie_httponly = 1
session.use_strict_mode = 1

; ---- Output buffering ----
output_buffering = 4096
zlib.output_compression = Off

; ---- Encoding / Multibyte ----
mbstring.language = Japanese
# mbstring.internal_encoding = UTF-8

; =========================
; OPcache (dev)
; =========================
[opcache]
opcache.enable=1
opcache.enable_cli=1
opcache.memory_consumption=256
opcache.interned_strings_buffer=16
opcache.max_accelerated_files=20000

; 開発はコード変更を即反映
opcache.validate_timestamps=1
opcache.revalidate_freq=0
opcache.fast_shutdown=1
opcache.jit=0

; =========================
; FPM (if using php-fpm)
; =========================
[www]
; 必要ならDockerfile側で clear_env を明示してもOK
; clear_env = no

; =========================
; Xdebug (if installed)
; =========================
[xdebug]
; Xdebugを入れている場合だけ有効化（無い場合は無視されます）
xdebug.mode = debug,develop
xdebug.start_with_request = yes
xdebug.client_host = host.docker.internal
xdebug.client_port = 9003
xdebug.log_level = 0